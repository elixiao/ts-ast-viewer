import{e as c,m as h}from"./editor.api.6ab7b656.js";import{m as Q}from"./editor.api.6ab7b656.js";import{r,j as I}from"./index.19c9524b.js";function D(e){return/^\d+$/.test(e)?"".concat(e,"px"):e}function E(){}var b=globalThis&&globalThis.__assign||function(){return b=Object.assign||function(e){for(var u,a=1,t=arguments.length;a<t;a++){u=arguments[a];for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(e[l]=u[l])}return e},b.apply(this,arguments)};function k(e){var u=e.width,a=e.height,t=e.value,l=e.defaultValue,f=e.language,p=e.theme,m=e.options,S=e.overrideServices,j=e.editorWillMount,R=e.editorDidMount,T=e.editorWillUnmount,P=e.onChange,g=e.className,M=e.original,y=e.originalUri,i=e.modifiedUri,O=r.exports.useRef(null),n=r.exports.useRef(null),W=r.exports.useRef(null),U=r.exports.useRef(null),C=D(u),N=D(a),L=r.exports.useMemo(function(){return{width:C,height:N}},[C,N]),$=function(){var o=j(h);return o||{}},F=function(){R(n.current,h);var o=n.current.getModel().modified;W.current=o.onDidChangeContent(function(s){U.current||P(o.getValue(),s)})},d=function(){T(n.current,h)},H=function(){var o=t!=null?t:l,s=y==null?void 0:y(h),x=i==null?void 0:i(h),V=s&&c.getModel(s),w=x&&c.getModel(x);V?(V.setValue(M),c.setModelLanguage(V,f)):V=c.createModel(o,f,s),w?(V.setValue(o),c.setModelLanguage(w,f)):w=c.createModel(o,f,x),n.current.setModel({original:V,modified:w})};return r.exports.useEffect(function(){O.current&&($(),n.current=c.createDiffEditor(O.current,b(b(b({},g?{extraEditorClassName:g}:{}),m),p?{theme:p}:{}),S),H(),F())},[]),r.exports.useEffect(function(){n.current&&n.current.updateOptions(b(b({},g?{extraEditorClassName:g}:{}),m))},[g,m]),r.exports.useEffect(function(){n.current&&n.current.layout()},[u,a]),r.exports.useEffect(function(){if(n.current){var o=n.current.getModel(),s=o.original,x=o.modified;c.setModelLanguage(s,f),c.setModelLanguage(x,f)}},[f]),r.exports.useEffect(function(){if(n.current){var o=n.current.getModel().modified;U.current=!0,n.current.getModifiedEditor().pushUndoStop(),o.pushEditOperations([],[{range:o.getFullModelRange(),text:t}]),n.current.getModifiedEditor().pushUndoStop(),U.current=!1}},[t]),r.exports.useEffect(function(){c.setTheme(p)},[p]),r.exports.useEffect(function(){if(n.current){var o=n.current.getModel().original;M!==o.getValue()&&o.setValue(M)}},[M]),r.exports.useEffect(function(){return function(){if(n.current){d(),n.current.dispose();var o=n.current.getModel(),s=o.original,x=o.modified;s&&s.dispose(),x&&x.dispose()}W.current&&W.current.dispose()}},[]),I("div",{ref:O,style:L,className:"react-monaco-editor-container"})}k.defaultProps={width:"100%",height:"100%",original:null,value:null,defaultValue:"",language:"javascript",theme:null,options:{},overrideServices:{},editorWillMount:E,editorDidMount:E,editorWillUnmount:E,onChange:E,className:null};k.displayName="MonacoDiffEditor";var v=globalThis&&globalThis.__assign||function(){return v=Object.assign||function(e){for(var u,a=1,t=arguments.length;a<t;a++){u=arguments[a];for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(e[l]=u[l])}return e},v.apply(this,arguments)},A=globalThis&&globalThis.__rest||function(e,u){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&u.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,t=Object.getOwnPropertySymbols(e);l<t.length;l++)u.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(a[t[l]]=e[t[l]]);return a};function q(e){var u=e.width,a=e.height,t=e.value,l=e.defaultValue,f=e.language,p=e.theme,m=e.options,S=e.overrideServices,j=e.editorWillMount,R=e.editorDidMount,T=e.editorWillUnmount,P=e.onChange,g=e.className,M=e.uri,y=r.exports.useRef(null),i=r.exports.useRef(null),O=r.exports.useRef(null),n=r.exports.useRef(null),W=D(u),U=D(a),C=r.exports.useMemo(function(){return{width:W,height:U}},[W,U]),N=function(){var d=j(h);return d||{}},L=function(){R(i.current,h),O.current=i.current.onDidChangeModelContent(function(d){n.current||P(i.current.getValue(),d)})},$=function(){T(i.current,h)},F=function(){var d=t!==null?t:l;if(y.current){var H=v(v({},m),N()),o=M==null?void 0:M(h),s=o&&c.getModel(o);s?(s.setValue(d),c.setModelLanguage(s,f)):s=c.createModel(d,f,o),i.current=c.create(y.current,v(v(v({model:s},g?{extraEditorClassName:g}:{}),H),p?{theme:p}:{}),S),L()}};return r.exports.useEffect(F,[]),r.exports.useEffect(function(){if(i.current){if(t===i.current.getValue())return;var d=i.current.getModel();n.current=!0,i.current.pushUndoStop(),d.pushEditOperations([],[{range:d.getFullModelRange(),text:t}],void 0),i.current.pushUndoStop(),n.current=!1}},[t]),r.exports.useEffect(function(){if(i.current){var d=i.current.getModel();c.setModelLanguage(d,f)}},[f]),r.exports.useEffect(function(){if(i.current){m.model;var d=A(m,["model"]);i.current.updateOptions(v(v({},g?{extraEditorClassName:g}:{}),d))}},[g,m]),r.exports.useEffect(function(){i.current&&i.current.layout()},[u,a]),r.exports.useEffect(function(){c.setTheme(p)},[p]),r.exports.useEffect(function(){return function(){i.current&&($(),i.current.dispose()),O.current&&O.current.dispose()}},[]),I("div",{ref:y,style:C,className:"react-monaco-editor-container"})}q.defaultProps={width:"100%",height:"100%",value:null,defaultValue:"",language:"javascript",theme:null,options:{},overrideServices:{},editorWillMount:E,editorDidMount:E,editorWillUnmount:E,onChange:E,className:null};q.displayName="MonacoEditor";export{k as MonacoDiffEditor,q as default,Q as monaco};
